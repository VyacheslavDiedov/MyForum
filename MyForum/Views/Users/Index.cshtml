@model IEnumerable<MyForum.Data.User>
@{
    ViewBag.Title = "Users";
}

<div class="wrapper wrapper-content animated fadeInRight">
    <div class="ibox-content m-b-sm border-bottom">
        <div class="p-xs">
            @if (User.IsInRole("admin"))
            {
                <a asp-action="Create" class="btn btn-secondary btn-dark position-right">Додати користувача</a>
            }
            <table class="table">
                <tr>
                    <th>Електронна адреса</th>
                    <th>Ім'я</th>
                    <th>Прізвище</th>
                    <th>Дата народження</th>
                </tr>
                @foreach (var user in Model)
                {
                    <tr>
                        <td>
                            <a asp-action="UserProfile" asp-route-userId="@user.Id">
                                @user.Email
                            </a>
                        </td>
                        <td>@user.FirstName</td>
                        <td>@user.SecondName</td>
                        <td>@user.BirthDate.ToShortDateString()</td>


                        @if (User.IsInRole("admin"))
                        {
                            <td>
                                <a asp-action="Edit" asp-route-id="@user.Id" title="Змінити">
                                        <svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg"  width="15" height="15" viewBox="0 0 128 128"><defs><style>.cls-1{fill:#2d3e50;}.cls-2{fill:#1d75b8;}</style></defs><path class="cls-1" d="M92.5105,82.61192a6.084,6.084,0,0,0-3.2788-4.41553c-5.70123-2.84294-18.21195-7.04166-18.21195-7.04166V67.02391l.34826-.26282a11.9523,11.9523,0,0,0,4.5382-7.5958l.07009-.44024h.33949A4.61707,4.61707,0,0,0,80.589,55.85144a5.02793,5.02793,0,0,0,.6286-2.43556,4.62608,4.62608,0,0,0-.32854-1.71277,2.38889,2.38889,0,0,0-.92647-1.48938l-1.15427-.70087L79.09521,48.26c2.08512-9.08954-4.95654-17.27673-14.41185-17.50234-.23-.00438-.45776-.00655-.68336-.00219-.2256-.00436-.45338-.00219-.68336.00219-9.45531.2256-16.497,8.41279-14.41185,17.50234l.28692,1.25282-1.15427.70087a2.38889,2.38889,0,0,0-.92647,1.48938,4.62608,4.62608,0,0,0-.32854,1.71277,5.02793,5.02793,0,0,0,.6286,2.43556A4.61707,4.61707,0,0,0,51.68422,58.725h.33949l.07009.44024a11.9523,11.9523,0,0,0,4.5382,7.5958l.34826.26282v4.13081S44.46953,75.35345,38.7683,78.19639a6.084,6.084,0,0,0-3.2788,4.41553,132.47169,132.47169,0,0,0-1.14988,15.31863H93.66038A132.47169,132.47169,0,0,0,92.5105,82.61192Z"/><path class="cls-2" d="M119.47637,37.21706A61.61893,61.61893,0,0,0,97.78318,12.9867a60.66153,60.66153,0,0,0-51.21841-6.8988A60.1906,60.1906,0,0,0,9.01306,40.70346l4.62886,1.95518A54.60643,54.60643,0,0,1,34.06591,18.78a53.62111,53.62111,0,0,1,59.33174.80429A53.23713,53.23713,0,0,1,111.8234,41.63552l-5.79661,3.34664L123.38131,52.306l1.99048-18.49268Z"/><path class="cls-2" d="M8.52363,90.78294A61.61893,61.61893,0,0,0,30.21682,115.0133a60.66153,60.66153,0,0,0,51.21841,6.8988,60.1906,60.1906,0,0,0,37.55172-34.61556l-4.62886-1.95518A54.60643,54.60643,0,0,1,93.93409,109.22a53.62111,53.62111,0,0,1-59.33174-.80429A53.23713,53.23713,0,0,1,16.1766,86.36448l5.79661-3.34664L4.61869,75.694,2.6282,94.18666Z"/></svg>
                                    </a>
                                    <a asp-controller="Roles" asp-action="Edit" asp-route-userid="@user.Id" title="Права доступу">
                                        <svg enable-background="new 0 0 32 32" width="15" height="15" id="Layer_1" version="1.1" viewBox="0 0 32 32" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="settings">
                                            <path d="M30.391,12.68l-3.064-0.614c-0.154-0.443-0.336-0.873-0.537-1.289l1.736-2.604   c0.529-0.793,0.424-1.85-0.25-2.523l-1.924-1.924c-0.387-0.387-0.898-0.586-1.416-0.586c-0.383,0-0.77,0.11-1.107,0.336   l-2.604,1.735c-0.418-0.202-0.848-0.382-1.291-0.536L19.32,1.61c-0.186-0.936-1.008-1.608-1.961-1.608h-2.72   c-0.953,0-1.774,0.673-1.961,1.608l-0.614,3.065c-0.443,0.154-0.873,0.335-1.289,0.536L8.172,3.476   C7.833,3.25,7.447,3.14,7.063,3.14c-0.517,0-1.028,0.199-1.415,0.586L3.725,5.65c-0.674,0.674-0.779,1.73-0.25,2.523l1.735,2.604   c-0.202,0.417-0.382,0.847-0.536,1.29L1.608,12.68C0.673,12.867,0,13.688,0,14.641v2.72c0,0.953,0.673,1.775,1.608,1.961   l3.065,0.615c0.154,0.443,0.335,0.873,0.536,1.289L3.475,23.83c-0.529,0.793-0.424,1.85,0.25,2.523l1.924,1.924   c0.387,0.387,0.898,0.586,1.415,0.586c0.384,0,0.771-0.111,1.108-0.336l2.604-1.736c0.417,0.203,0.847,0.383,1.29,0.537   l0.613,3.064c0.187,0.936,1.008,1.609,1.961,1.609h2.72c0.953,0,1.775-0.674,1.961-1.609l0.615-3.064   c0.443-0.154,0.873-0.336,1.289-0.537l2.604,1.736c0.338,0.225,0.725,0.336,1.107,0.336c0.518,0,1.029-0.199,1.416-0.586   l1.924-1.924c0.674-0.674,0.779-1.73,0.25-2.523l-1.736-2.604c0.203-0.418,0.383-0.848,0.537-1.291l3.064-0.613   C31.326,19.137,32,18.314,32,17.361v-2.72C32,13.688,31.326,12.867,30.391,12.68z M26.934,17.975   c-0.695,0.139-1.264,0.635-1.496,1.305c-0.129,0.369-0.279,0.727-0.447,1.074c-0.311,0.639-0.258,1.393,0.135,1.982l1.736,2.604   l-1.924,1.924l-2.604-1.736c-0.334-0.223-0.721-0.336-1.109-0.336c-0.297,0-0.596,0.066-0.871,0.199   c-0.348,0.168-0.705,0.32-1.076,0.449c-0.668,0.232-1.164,0.801-1.303,1.496l-0.615,3.066h-2.72l-0.613-3.066   c-0.139-0.695-0.635-1.264-1.304-1.496c-0.369-0.129-0.728-0.279-1.075-0.447c-0.276-0.135-0.574-0.201-0.872-0.201   c-0.389,0-0.775,0.113-1.109,0.336l-2.604,1.736l-1.924-1.924l1.735-2.604c0.393-0.59,0.444-1.344,0.137-1.98   c-0.168-0.348-0.319-0.705-0.448-1.076c-0.232-0.668-0.802-1.164-1.496-1.303l-3.065-0.615L2,14.641l3.066-0.613   c0.694-0.139,1.264-0.635,1.496-1.304c0.129-0.369,0.278-0.728,0.447-1.075c0.31-0.638,0.258-1.392-0.136-1.981L5.139,7.064   L7.062,5.14l2.604,1.735C10,7.098,10.387,7.211,10.775,7.211c0.297,0,0.595-0.066,0.871-0.199c0.347-0.168,0.705-0.319,1.075-0.448   c0.669-0.232,1.165-0.802,1.304-1.496l0.614-3.065l2.72-0.001l0.613,3.066c0.139,0.694,0.635,1.264,1.305,1.496   c0.369,0.129,0.727,0.278,1.074,0.447c0.277,0.134,0.574,0.2,0.873,0.2c0.389,0,0.775-0.113,1.109-0.336l2.604-1.735l1.924,1.924   l-1.736,2.604c-0.393,0.59-0.443,1.343-0.137,1.98c0.168,0.347,0.32,0.705,0.449,1.075c0.232,0.669,0.801,1.165,1.496,1.304   l3.064,0.614L30,17.361L26.934,17.975z" fill="#333333" /><path d="M16,9.001c-3.865,0-7,3.135-7,7c0,3.866,3.135,7,7,7s7-3.135,7-7C23,12.136,19.865,9.001,16,9.001z    M16,22.127c-3.382,0-6.125-2.744-6.125-6.125c0-3.382,2.743-6.125,6.125-6.125c3.381,0,6.125,2.743,6.125,6.125   C22.125,19.383,19.381,22.127,16,22.127z" fill="#333333" /><path d="M16,12.001c-2.21,0-4,1.79-4,4c0,2.209,1.79,4,4,4c2.209,0,4-1.791,4-4C20,13.792,18.209,12.001,16,12.001z    M16,19.002c-1.656,0-3-1.344-3-3c0-1.656,1.344-3,3-3s3,1.344,3,3C19,17.658,17.656,19.002,16,19.002z" fill="#333333" />
                                        </g></svg>
                                    </a>
                                    <a asp-controller="Users" asp-action="ChangePassword" asp-route-id="@user.Id" title="Змінити пароль">
                                        <svg version="1.1" id="Layer_1_1_" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                                             viewBox="0 0 16 16" enable-background = "new" 0 0 16 16" width="15" height="15" xml:space="preserve">
                                            <path d="M0,11.864c0,2.209,1.791,4,4,4c2.209,0,4-1.791,4-4c0-0.554-0.113-1.082-0.317-1.562l8.181-8.181L13.743,0l-2.2,2.2
	                                                L9.439,0.096L8.732,0.803l2.104,2.104L10.043,3.7L7.939,1.596L7.232,2.303l2.104,2.104L5.562,8.181C5.082,7.977,4.554,7.864,4,7.864
	                                                C1.791,7.864,0,9.655,0,11.864z M3,11.864c0.552,0,1,0.448,1,1s-0.448,1-1,1c-0.552,0-1-0.448-1-1S2.448,11.864,3,11.864z"/>
                                        </svg>
                                    </a>
                                <a class="text-black" href="#" data-toggle="modal" data-target="#confirmDelete@{@user.Id}" title="Видалити">
                                        <svg width="15" height="15" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                                             viewBox="0 0 511.999 511.999" xml:space="preserve">
                                            <path style="fill: #666666;" d="M384.955,256l120.28-120.28c9.019-9.019,9.019-23.642,0-32.66L408.94,6.765c-9.019-9.019-23.642-9.019-32.66,0l-120.28,120.28L135.718,6.765c-9.019-9.019-23.642-9.019-32.66,0L6.764,103.058c-9.019,9.019-9.019,23.642,0,32.66l120.28,120.28L6.764,376.28c-9.019,9.019-9.019,23.642,0,32.66l96.295,96.294c9.019,9.019,23.642,9.019,32.66,0l120.28-120.28l120.28,120.28c9.019,9.019,23.642,9.019,32.66,0l96.295-96.294c9.019-9.019,9.019-23.642,0-32.66L384.955,256z" />
                                        </svg>
                                    </a>
                                <div class="modal fade" id="confirmDelete@{@user.Id}" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                        <div class="modal-dialog" role="document">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <h5 class="modal-title" id="exampleModalLabel">Ви впевнені що хочете видалити користувача?</h5>
                                                    <button class="close" type="button" data-dismiss="modal" aria-label="Close">
                                                        <span aria-hidden="true">×</span>
                                                    </button>
                                                </div>
                                                <div class="modal-body">Повернути повернути користувача буде неможливо.</div>
                                                <div class="modal-footer">
                                                    <button class="btn btn-secondary" type="button" data-dismiss="modal">Відміна</button>
                                                    
                                                    <form asp-action="Delete" asp-route-id="@user.Id" method="post">
                                                        <input class="btn btn-primary " type="submit" value="Видалити" />
                                                    </form>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                            </td>
                        }
                    </tr>
                }
            </table>
        </div>
    </div>
</div>
    